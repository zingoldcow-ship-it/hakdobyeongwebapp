<!doctype html><html lang="ko"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>학도병 탐구 웹앱</title><link rel="stylesheet" href="css/style.css"/>
</head><body><div class="wrap"><div class="card">
<div class="topbar"><div><span class="pill">학도병 이해 웹앱</span></div></div>
<h1>학도병 탐구 시작 기록</h1>
<p class="muted preline">
나는 지금부터 한국전쟁 당시 등장한 학도병에 대해 알아보기 위한 탐구를 시작한다.

이 탐구에서는 한 사람의 이야기가 아니라, 여러 기록에 나타난 사실과 상황을 차례대로 살펴본다.
감정이나 판단보다 먼저, 당시의 조건과 선택을 정확히 이해하는 것을 목표로 한다.

탐구가 끝난 뒤에는 학도병이 한국전쟁 속에서 어떤 존재였는지를 나의 말로 정리해 볼 것이다.
</p>

<div class="grid grid2">
  <div>
    <h2>탐구 태도 체크</h2>
    <div class="checklist">
      <label class="checkitem"><input type="checkbox" id="c1"/><span>나는 자료를 읽고 근거를 찾아 생각한다.</span></label>
      <label class="checkitem"><input type="checkbox" id="c2"/><span>나는 사실과 느낌을 구분하여 정리한다.</span></label>
      <label class="checkitem"><input type="checkbox" id="c3"/><span>나는 지금의 생각을 바로 판단하지 않는다.</span></label>
    </div>
    <p class="small muted">※ 권장: 세 항목을 모두 체크하면 다음으로 이동할 수 있어요.</p>
  </div>

  <div>
    <h2>탐구자 정보</h2>
    <label>반 (예: 5-9)</label><input id="class_name" placeholder="예: 5-9"/>
    <div class="row">
      <div><label>번호</label><input id="number" placeholder="예: 12"/></div>
      <div><label>이름</label><input id="name" placeholder="예: 홍길동"/></div>
    </div>
    <label>수업 코드(선생님이 알려준 코드)</label><input id="run_id" placeholder="예: 5026-1차시"/>
    <p class="small muted">※ 수업 코드가 있으면 다른 날의 기록과 섞이지 않아요.</p>
  </div>
</div>


<div class="row" style="margin-top:10px">
  <button class="btn ghost" id="soundTestBtn" type="button">🔊 소리 테스트</button><span id="soundTestHidden" style="display:none"></span>
  <span class="small muted">※ 안 들리면 기기 볼륨/무음 모드 확인</span>
</div>

<div class="row" style="margin-top:14px">
  <button class="btn ghost" id="resetBtn">입력 초기화</button>
  <button class="btn primary" id="startBtn">Scene 1으로 이동하기 →</button>
</div>

<div class="footer"><div>본 웹앱은 공공기관의 학도병 관련 자료를 바탕으로 학습 목적에 맞게 정리된 텍스트를 사용합니다.</div>
<div class="small">출처: 국가기록원 / 국사편찬위원회 / 교육부 교육사 자료 / 국방부 군사편찬연구소 / 보훈처</div>
<div class="small">소리 재생은 기기 정책에 따라 첫 버튼 클릭 이후 활성화됩니다.</div></div>
</div></div>

<script type="module">
import { setStudent } from './js/utils.js';
import { initTypingSound, primeTypingSound, typeText } from './js/typing.js';
initTypingSound({src:'assets/typing.mp3'});
const _soundTest = document.getElementById('soundTestBtn');
if(_soundTest){ _soundTest.addEventListener('click', async ()=>{ await primeTypingSound(); const h=document.getElementById('soundTestHidden'); if(h) await typeText(h,'타자소리테스트',{speed:90}); });
}

const el=(id)=>document.getElementById(id);
function buildStudentId(c,n,name){ return `${(c||'').trim()}_${(n||'').trim()}_${(name||'').trim()}`; }
try{ const p=JSON.parse(localStorage.getItem('student_profile')||'null');
  if(p){ el('class_name').value=p.class_name||''; el('number').value=p.number||''; el('name').value=p.name||''; el('run_id').value=p.run_id||''; }
}catch(e){}

const startBtn = el('startBtn');
function updateStartEnabled(){
  const className = el('class_name').value.trim();
  const number = el('number').value.trim();
  const name = el('name').value.trim();
  const runId = el('run_id').value.trim();
  startBtn.disabled = !(className && number && name && runId);
}
['class_name','number','name','run_id'].forEach(id=> el(id).addEventListener('input', updateStartEnabled));
updateStartEnabled();
el('resetBtn').addEventListener('click', ()=>{ localStorage.removeItem('student_profile'); el('class_name').value=''; el('number').value=''; el('name').value=''; el('run_id').value=''; el('c1').checked=el('c2').checked=el('c3').checked=false; });
startBtn.addEventListener('click', ()=>{
  primeTypingSound();
  const c1=el('c1').checked,c2=el('c2').checked,c3=el('c3').checked;
  const className=el('class_name').value.trim(), number=el('number').value.trim(), name=el('name').value.trim(), runId=el('run_id').value.trim();
  if(!className||!number||!name){ alert('반/번호/이름을 입력해 주세요.'); return; }
  if(!runId){ alert('수업 코드를 입력해 주세요.'); return; }
  if(!(c1&&c2&&c3)){ if(!confirm('체크 항목이 모두 선택되지 않았어요. 그래도 진행할까요?')) return; }
  setStudent({ class_name:className, number, name, run_id:runId, student_id: buildStudentId(className, number, name) });
  location.href='scene.html?scene=1';
});
</script>
</body></html>
